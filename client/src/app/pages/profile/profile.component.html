<div class="profile-container">
  <!-- Phần ảnh đại diện -->
  <div class="desktop-profile" [ngClass]="{'show-popup': showPopup}">
    <div class="back-button" (click)="closePopup()">
      <span class="material-icons">chevron_left</span>
    </div>
    <div class="card-section avatar-section">
<!--      tấm ảnh còn lỗi-->
<!--      <img-->
<!--        [src]="-->
<!--        isFullUrl(profile.avatar)-->
<!--          ? profile.avatar-->
<!--          : profile.avatar.startsWith('data:')-->
<!--            ? profile.avatar-->
<!--            : 'https://via.placeholder.com/100'-->
<!--      "-->
<!--        alt="Avatar"-->
<!--        class="avatar"-->
<!--      />-->

      <img class="avatar" src="assets/admin.jpg" alt="User Avatar" />

      <div class="avatar-buttons">
        <button class="upload-button" (click)="onUpload()">
          Upload new pictures
        </button>
        <button class="delete-button" (click)="onDelete()">Delete</button>
      </div>
    </div>

    <!-- Form thông tin cá nhân -->
    <div class="card-section-profile-form">
      <form class="profile-form">
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input
              type="text"
              id="firstName"
              name="firstName"
              [(ngModel)]="profile.firstName"
              placeholder="Enter your First Name"
              required
              class="name-field"
            />
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input
              type="text"
              id="lastName"
              name="lastName"
              [(ngModel)]="profile.lastName"
              placeholder="Enter your Last Name"
              required
              class="name-field"
            />
          </div>
        </div>

        <div class="form-group">
          <label for="birthday">Birthday</label>
          <input
            type="text"
            id="birthday"
            name="birthday"
            [(ngModel)]="profile.birthday"
            placeholder="Enter your Birthday"
            required
          />
        </div>

        <div class="form-group">
          <label for="email">Email Address</label>
          <input
            type="email"
            id="email"
            name="email"
            [(ngModel)]="profile.email"
            placeholder="Enter your Email Address"
            required
          />
        </div>

        <div class="form-group">
          <label for="phone">Phone number</label>
          <input
            type="tel"
            id="phone"
            name="phone"
            [(ngModel)]="profile.phone"
            placeholder="Enter your Phone number"
          />
        </div>

        <div class="form-group">
          <label for="location">Location (không bắt buộc)</label>
          <div class="location-input">
            <input
              type="text"
              id="location"
              name="location"
              [(ngModel)]="profile.address"
              placeholder=""
            />
          </div>
        </div>

        <!-- Nút Save và Close -->
        <div class="form-actions">
          <button
            type="button"
            class="save-button"
            (click)="onSave()"
            [disabled]="isLoading"
          >
            {{ isLoading ? "Đang lưu..." : "Save" }}
          </button>
          <button
            type="button"
            class="close-button"
            (click)="closePopup()"
          >
            Đóng
          </button>
        </div>

        <!-- Thông báo -->
        <div class="success-message" *ngIf="successMessage">
          {{ successMessage }}
        </div>
        <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>
      </form>
    </div>
  </div>

  <div class="mobile-profile-menu">
    <!-- Hai nút phía trên -->
    <div class="user-info-card">
      <div class="avt_user">
        <img src="assets/admin.jpg" alt="User Avatar" />
        <div class="username">{{ profile.firstName }}</div>
      </div>
    </div>
    <div class="user-actions">
      <button class="btn edit-btn" (click)="openPopup()">
        <span class="material-icons">edit</span> Chỉnh sửa thông tin
      </button>
    </div>

    <!-- Mục menu bên dưới -->
    <div class="menu-section">
      <div class="menu-item">
        <span class="material-icons">star</span>
        <span class="label">Top 10 on the leaderboard</span>
      </div>

      <div class="menu-item">
        <span class="material-icons">settings</span>
        <span class="label">Setting</span>
        <span class="material-icons">chevron_right</span>
      </div>
    </div>
  </div>
</div>
